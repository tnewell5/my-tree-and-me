(this["webpackJsonpmy-tree-and-me"]=this["webpackJsonpmy-tree-and-me"]||[]).push([[0],{29:function(e,n,t){},30:function(e,n,t){},32:function(e,n,t){},34:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t.n(r),i=t(21),c=t.n(i),o=(t(29),t(30),t(17)),s={integration:"project-my-tree-and-me--8NK7JRtrFVLNAuHEA4ZnOAVIYixhzAL",version:"2020-11-20"},u=t(0),l=t.n(u),d=t(1),h=t(6),f=(t(32),t(24)),b=t(3),p={style:"fill: none; stroke: pink;",arrowheadStyle:"display: none"},m=function(e,n){var t,r=[{id:e.id,label:"<h3>".concat(e.name,"</h3><h4>").concat(e.birthYear," - ").concat(null!==(t=e.deathYear)&&void 0!==t?t:"","</h4>"),labelType:"html"}];return n.forEach((function(e){var n;r.push({id:e["relation-id"],label:"<h3>".concat(e.name,"</h3><h4>").concat(e.birthYear," - ").concat(null!==(n=e.deathYear)&&void 0!==n?n:"","</h4>"),labelType:"html"})})),r},j=function(e,n){var t=[];return n.forEach((function(n){"parent"===n.relation&&t.push({source:n["relation-id"],target:e.id,config:p}),"child"===n.relation&&t.push({source:e.id,target:n["relation-id"],config:p})})),t},y=function(e){var n=Object(o.b)().Query,t=Object(r.useState)({id:"1",name:"Michael R.",birthYear:"1955",deathYear:null}),a=Object(h.a)(t,2),i=a[0],c=a[1],s=Object(r.useState)({}),u=Object(h.a)(s,2),p=u[0],y=u[1];Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({queryName:"first-degree-relations",tableName:"RELATIONSHIP",customQuery:{id:i.id}});case 2:t=e.sent,r=t.map(function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({queryName:"get-person-by-id",tableName:"PERSON",customQuery:{id:t["relation-id"]}});case 2:r=e.sent,t.name=r[0].name,t.birthYear=r[0]["birth-year"],t.deathYear=r[0]["death-year"];case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),Promise.all(r).then((function(){var e=m(i,t),n=j(i,t);y({nodes:e,links:n})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,i]);var v=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=null===t||void 0===t||null===(r=t.original)||void 0===r?void 0:r.id)){e.next=6;break}return e.next=4,n({queryName:"get-person-by-id",tableName:"PERSON",customQuery:{id:a}});case 4:i=e.sent,c({id:i[0].id,name:i[0].name,birthYear:i[0]["birth-year"],deathYear:i[0]["death-year"]});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return p.nodes?Object(b.jsx)("div",{children:Object(b.jsx)(f.a,{nodes:p.nodes,links:p.links,options:{rankdir:"TB",align:"UL",ranker:"tight-tree"},width:"500",height:"500",shape:"circle",fitBoundaries:!0,zoomable:!0,onNodeClick:v,onRelationshipClick:function(e){return console.log(e)}})}):null};var v=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("header",{className:"App-header",children:"My Tree and Me"}),Object(b.jsx)(o.a,{ebconfig:s,children:Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(y,{})})})]})},O=function(e){e&&e instanceof Function&&t.e(4).then(t.bind(null,43)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,i=n.getLCP,c=n.getTTFB;t(e),r(e),a(e),i(e),c(e)}))};c.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(v,{})}),document.getElementById("root")),O()}},[[34,1,2]]]);
//# sourceMappingURL=main.d6852888.chunk.js.map
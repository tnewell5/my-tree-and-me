{"version":3,"sources":["../dTree.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","Components/data.js","Components/helpers.js","Components/Graph.js"],"names":["module","exports","TreeBuilder","root","siblings","opts","DEBUG_LEVEL","debug","this","allNodes","_flatten","nodeSize","callbacks","call","_","filter","node","hidden","get","nodeWidth","textRenderer","marriageSize","marriageNodeSize","width","margin","left","right","height","top","bottom","zoom","d3","scaleExtent","on","g","attr","event","transform","svg","select","target","append","zoomIdentity","translate","scale","tree","nodeHeightSeperation","separation","a","b","data","_update","source","treenodes","links","selectAll","enter","l","noParent","styles","linage","_elbow","nodes","descendants","_linkSiblings","marriage","bind","_siblingLine","d","Math","round","x","cWidth","y","cHeight","id","html","isMarriage","marriageRenderer","extra","nodeRenderer","name","textClass","stopPropagation","detail","marriageClick","nodeClick","preventDefault","marriageRightClick","nodeRightClick","n","i","recurse","children","forEach","push","ny","linedata","line","curve","curveStepAfter","fun","start","v","end","marriageId","marriageNode","find","nodeHeight","number","nodeMaxHeight","maxHeight","tmpSvg","document","createElement","body","appendChild","map","container","setAttribute","style","visibility","maxWidth","text","innerHTML","offsetHeight","removeChild","max","size","nodeClass","msg","console","log","dTree","VERSION","init","options","defaultsDeep","hideMarriageNodes","_nodeHeightSeperation","_nodeRenderer","_nodeSize","nodeSorter","aName","aExtra","bName","bExtra","_textRenderer","_marriageRenderer","_marriageSize","treeBuilder","_preprocess","_zoomTo","duration","transition","create","resetZoom","zoomTo","zoomToNode","nodeId","zoomToFit","groupBounds","getBBox","fullWidth","clientWidth","fullHeight","clientHeight","reconstructTree","person","parent","class","depthOffset","pushNode","_sortPersons","child","_sortMarriages","marriages","index","m","sp","spouse","hierarchy","persons","undefined","sort","Array","isArray","marriageA","marriageB","factory","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","apply","_objectSpread2","arguments","length","getOwnPropertyDescriptors","defineProperties","1","yearString","childrenIds","2","3","4","5","6","7","8","9","10","11","hashToTree","rootPersonId","childId"],"mappings":"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","file":"static/js/main.cb56083d.chunk.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.dTree = factory());\n}(this, (function () { 'use strict';\n\nclass TreeBuilder {\n\n  constructor(root, siblings, opts) {\n    TreeBuilder.DEBUG_LEVEL = opts.debug ? 1 : 0;\n\n    this.root = root;\n    this.siblings = siblings;\n    this.opts = opts;\n\n    // flatten nodes\n    this.allNodes = this._flatten(this.root);\n\n    // calculate node sizes\n    this.nodeSize = opts.callbacks.nodeSize.call(this,\n      // filter hidden and marriage nodes\n      _.filter(\n        this.allNodes,\n        node => !(node.hidden || _.get(node, 'data.isMarriage'))\n      ),\n      opts.nodeWidth,\n      opts.callbacks.textRenderer\n    );\n    this.marriageSize = opts.callbacks.marriageSize.call(this,\n      // filter hidden and non marriage nodes\n      _.filter(\n        this.allNodes,\n        node => !node.hidden && _.get(node, 'data.isMarriage')\n      ),\n      this.opts.marriageNodeSize\n    );\n  }\n\n  create() {\n\n    let opts = this.opts;\n    let allNodes = this.allNodes;\n    let nodeSize = this.nodeSize;\n\n    let width = opts.width + opts.margin.left + opts.margin.right;\n    let height = opts.height + opts.margin.top + opts.margin.bottom;\n\n    // create zoom handler\n    const zoom = this.zoom = d3.zoom()\n      .scaleExtent([0.1, 10])\n      .on('zoom', function () {\n        g.attr('transform', d3.event.transform);\n      });\n\n    // make a svg\n    const svg = this.svg = d3.select(opts.target)\n      .append('svg')\n      .attr('viewBox', [0, 0, width, height])\n      .call(zoom);\n\n    // create svg group that holds all nodes\n    const g = this.g = svg.append('g');\n\n    // set zoom identity\n    svg.call(zoom.transform, d3.zoomIdentity.translate(width / 2, opts.margin.top).scale(1));\n\n    // Compute the layout.\n    this.tree = d3.tree()\n      .nodeSize([nodeSize[0] * 2,\n                 opts.callbacks.nodeHeightSeperation.call(this, nodeSize[0], nodeSize[1])]);\n\n    this.tree.separation(function separation(a, b) {\n      if (a.data.hidden || b.data.hidden) {\n        return 0.3;\n      } else {\n        return 0.6;\n      }\n    });\n\n    this._update(this.root);\n\n  }\n\n  _update(source) {\n\n    let opts = this.opts;\n    let allNodes = this.allNodes;\n    let nodeSize = this.nodeSize;\n    let marriageSize = this.marriageSize;\n\n    let treenodes = this.tree(source);\n    let links = treenodes.links();\n\n    // Create the link lines.\n    this.g.selectAll('.link')\n      .data(links)\n      .enter()\n      // filter links with no parents to prevent empty nodes\n      .filter(function(l) {\n        return !l.target.data.noParent;\n      })\n      .append('path')\n      .attr('class', opts.styles.linage)\n      .attr('d', this._elbow);\n\n    let nodes = this.g.selectAll('.node')\n      .data(treenodes.descendants())\n      .enter();\n\n    this._linkSiblings();\n\n    // Draw siblings (marriage)\n    this.g.selectAll('.sibling')\n      .data(this.siblings)\n      .enter()\n      .append('path')\n      .attr('class', opts.styles.marriage)\n      .attr('d', _.bind(this._siblingLine, this));\n\n    // Create the node rectangles.\n    nodes.append('foreignObject')\n      .filter(function(d) {\n        return d.data.hidden ? false : true;\n      })\n      .attr('x', function(d) {\n        return Math.round(d.x - d.cWidth / 2) + 'px';\n      })\n      .attr('y', function(d) {\n        return Math.round(d.y - d.cHeight / 2) + 'px';\n      })\n      .attr('width', function(d) {\n        return d.cWidth + 'px';\n      })\n      .attr('height', function(d) {\n        return d.cHeight + 'px';\n      })\n      .attr('id', function(d) {\n        return d.id;\n      })\n      .html(function(d) {\n        if (d.data.isMarriage) {\n          return opts.callbacks.marriageRenderer.call(this,\n            d.x,\n            d.y,\n            marriageSize[0],\n            marriageSize[1],\n            d.data.extra,\n            d.data.id,\n            d.data.class\n          )\n        } else {\n          return opts.callbacks.nodeRenderer.call(this,\n            d.data.name,\n            d.x,\n            d.y,\n            nodeSize[0],\n            nodeSize[1],\n            d.data.extra,\n            d.data.id,\n            d.data.class,\n            d.data.textClass,\n            opts.callbacks.textRenderer\n          )\n        }\n      })\n      .on('dblclick', function () {\n        // do not propagate a double click on a node\n        // to prevent the zoom from being triggered\n        d3.event.stopPropagation();\n      })\n      .on('click', function(d)  {\n        // ignore double-clicks and clicks on hidden nodes\n        if (d3.event.detail === 2 || d.data.hidden) {\n          return;\n        }\n        if (d.data.isMarriage) {\n          opts.callbacks.marriageClick.call(this, d.data.extra, d.data.id);\n        } else {\n          opts.callbacks.nodeClick.call(this, d.data.name, d.data.extra, d.data.id);\n        }\n      })\n      .on('contextmenu', function(d)  {\n        if (d.data.hidden) {\n          return;\n        }\n        d3.event.preventDefault();\n        if (d.data.isMarriage) {\n          opts.callbacks.marriageRightClick.call(this, d.data.extra, d.data.id);\n        } else {\n          opts.callbacks.nodeRightClick.call(this, d.data.name, d.data.extra, d.data.id);\n        }\n      });\n  }\n\n  _flatten(root) {\n    let n = [];\n    let i = 0;\n\n    function recurse(node) {\n      if (node.children) {\n        node.children.forEach(recurse);\n      }\n      if (!node.id) {\n        node.id = ++i;\n      }\n      n.push(node);\n    }\n    recurse(root);\n    return n;\n  }\n\n  _elbow(d, i) {\n    if (d.target.data.noParent) {\n      return 'M0,0L0,0';\n    }\n    let ny = Math.round(d.target.y + (d.source.y - d.target.y) * 0.50);\n\n    let linedata = [{\n      x: d.target.x,\n      y: d.target.y\n    }, {\n      x: d.target.x,\n      y: ny\n    }, {\n      x: d.source.x,\n      y: d.source.y\n    }];\n\n    let fun = d3.line().curve(d3.curveStepAfter)\n      .x(function(d) {\n        return d.x;\n      })\n      .y(function(d) {\n        return d.y;\n      });\n    return fun(linedata);\n  }\n\n  _linkSiblings() {\n\n    let allNodes = this.allNodes;\n\n    _.forEach(this.siblings, function(d) {\n      let start = allNodes.filter(function(v) {\n        return d.source.id == v.data.id;\n      });\n      let end = allNodes.filter(function(v) {\n        return d.target.id == v.data.id;\n      });\n      d.source.x = start[0].x;\n      d.source.y = start[0].y;\n      d.target.x = end[0].x;\n      d.target.y = end[0].y;\n\n      let marriageId = (start[0].data.marriageNode != null ?\n                        start[0].data.marriageNode.id :\n                        end[0].data.marriageNode.id);\n      let marriageNode = allNodes.find(function(n) {\n        return n.data.id == marriageId;\n      });\n      d.source.marriageNode = marriageNode;\n      d.target.marriageNode = marriageNode;\n    });\n\n  }\n\n  _siblingLine(d, i) {\n\n    let ny = Math.round(d.target.y + (d.source.y - d.target.y) * 0.50);\n    let nodeWidth = this.nodeSize[0];\n    let nodeHeight = this.nodeSize[1];\n\n    // Not first marriage\n    if (d.number > 0) {\n      ny -= Math.round(nodeHeight * 8 / 10);\n    }\n\n    let linedata = [{\n      x: d.source.x,\n      y: d.source.y\n    }, {\n      x: Math.round(d.source.x + nodeWidth * 6 / 10),\n      y: d.source.y\n    }, {\n      x: Math.round(d.source.x + nodeWidth * 6 / 10),\n      y: ny\n    }, {\n      x: d.target.marriageNode.x,\n      y: ny\n    }, {\n      x: d.target.marriageNode.x,\n      y: d.target.y\n    }, {\n      x: d.target.x,\n      y: d.target.y\n    }];\n\n    let fun = d3.line().curve(d3.curveStepAfter)\n      .x(function(d) {\n        return d.x;\n      })\n      .y(function(d) {\n        return d.y;\n      });\n    return fun(linedata);\n  }\n\n  static _nodeHeightSeperation(nodeWidth, nodeMaxHeight) {\n    return nodeMaxHeight + 25;\n  }\n\n  static _nodeSize(nodes, width, textRenderer) {\n    let maxWidth = 0;\n    let maxHeight = 0;\n    let tmpSvg = document.createElement('svg');\n    document.body.appendChild(tmpSvg);\n\n    _.map(nodes, function(n) {\n      let container = document.createElement('div');\n      container.setAttribute('class', n.data.class);\n      container.style.visibility = 'hidden';\n      container.style.maxWidth = width + 'px';\n\n      let text = textRenderer(n.data.name, n.data.extra, n.data.textClass);\n      container.innerHTML = text;\n\n      tmpSvg.appendChild(container);\n      let height = container.offsetHeight;\n      tmpSvg.removeChild(container);\n\n      maxHeight = Math.max(maxHeight, height);\n      n.cHeight = height;\n      if (n.data.hidden) {\n        n.cWidth = 0;\n      } else {\n        n.cWidth = width;\n      }\n    });\n    document.body.removeChild(tmpSvg);\n\n    return [width, maxHeight];\n  }\n\n  static _marriageSize (nodes, size) {\n    _.map(nodes, function (n) {\n      if (!n.data.hidden) {\n        n.cHeight = size;\n        n.cWidth = size;\n      }\n    });\n\n    return [size, size]\n  }\n\n  static _nodeRenderer(name, x, y, height, width, extra, id, nodeClass, textClass, textRenderer) {\n    let node = '';\n    node += '<div ';\n    node += 'style=\"height:100%;width:100%;\" ';\n    node += 'class=\"' + nodeClass + '\" ';\n    node += 'id=\"node' + id + '\">\\n';\n    node += textRenderer(name, extra, textClass);\n    node += '</div>';\n    return node;\n  }\n\n  static _textRenderer(name, extra, textClass) {\n    let node = '';\n    node += '<p ';\n    node += 'align=\"center\" ';\n    node += 'class=\"' + textClass + '\">\\n';\n    node += name;\n    node += '</p>\\n';\n    return node;\n  }\n\n  static _marriageRenderer (x, y, height, width, extra, id, nodeClass) {\n    return `<div style=\"height:100%\" class=\"${nodeClass}\" id=\"node${id}\"></div>`\n  }\n\n  static _debug(msg) {\n    if (TreeBuilder.DEBUG_LEVEL > 0)  {\n      console.log(msg);\n    }\n  }\n\n}\n\nconst dTree = {\n\n  VERSION: '2.4.1',\n\n  init: function(data, options = {}) {\n\n    var opts = _.defaultsDeep(options || {}, {\n      target: '#graph',\n      debug: false,\n      width: 600,\n      height: 600,\n      hideMarriageNodes: true,\n      callbacks: {\n        nodeClick: function(name, extra, id) {},\n        nodeRightClick: function(name, extra, id) {},\n        marriageClick: function(extra, id) {},\n        marriageRightClick: function(extra, id) {},\n        nodeHeightSeperation: function(nodeWidth, nodeMaxHeight) {\n          return TreeBuilder._nodeHeightSeperation(nodeWidth, nodeMaxHeight);\n        },\n        nodeRenderer: function(name, x, y, height, width, extra, id, nodeClass, textClass, textRenderer) {\n          return TreeBuilder._nodeRenderer(name, x, y, height, width, extra,\n            id,nodeClass, textClass, textRenderer);\n        },\n        nodeSize: function(nodes, width, textRenderer) {\n          return TreeBuilder._nodeSize(nodes, width, textRenderer);\n        },\n        nodeSorter: function(aName, aExtra, bName, bExtra) {return 0;},\n        textRenderer: function(name, extra, textClass) {\n          return TreeBuilder._textRenderer(name, extra, textClass);\n        },\n        marriageRenderer: function (x, y, height, width, extra, id, nodeClass) {\n          return TreeBuilder._marriageRenderer(x, y, height, width, extra, id, nodeClass)\n        },\n        marriageSize: function (nodes, size) {\n          return TreeBuilder._marriageSize(nodes, size)\n        },\n      },\n      margin: {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      },\n      nodeWidth: 100,\n      marriageNodeSize: 10,\n      styles: {\n        node: 'node',\n        marriageNode: 'marriageNode',\n        linage: 'linage',\n        marriage: 'marriage',\n        text: 'nodeText'\n      }\n    });\n\n    var data = this._preprocess(data, opts);\n    var treeBuilder = new TreeBuilder(data.root, data.siblings, opts);\n    treeBuilder.create();\n\n    function _zoomTo (x, y, zoom = 1, duration = 500) {\n      treeBuilder.svg\n        .transition()\n        .duration(duration)\n        .call(\n          treeBuilder.zoom.transform,\n          d3.zoomIdentity\n            .translate(opts.width / 2, opts.height / 2)\n            .scale(zoom)\n            .translate(-x, -y)\n        );\n    }\n\n    return {\n      resetZoom: function (duration = 500) {\n        treeBuilder.svg\n          .transition()\n          .duration(duration)\n          .call(\n            treeBuilder.zoom.transform,\n            d3.zoomIdentity.translate(opts.width / 2, opts.margin.top).scale(1)\n          );\n      },\n      zoomTo: _zoomTo,\n      zoomToNode: function (nodeId, zoom = 2, duration = 500) {\n        const node = _.find(treeBuilder.allNodes, {data: {id: nodeId}});\n        if (node) {\n          _zoomTo(node.x, node.y, zoom, duration);\n        }\n      },\n      zoomToFit: function (duration = 500) {\n        const groupBounds = treeBuilder.g.node().getBBox();\n        const width = groupBounds.width;\n        const height = groupBounds.height;\n        const fullWidth = treeBuilder.svg.node().clientWidth;\n        const fullHeight = treeBuilder.svg.node().clientHeight;\n        const scale = 0.95 / Math.max(width / fullWidth, height / fullHeight);\n\n        treeBuilder.svg\n          .transition()\n          .duration(duration)\n          .call(\n            treeBuilder.zoom.transform,\n            d3.zoomIdentity\n              .translate(\n                fullWidth / 2 - scale * (groupBounds.x + width / 2),\n                fullHeight / 2 - scale * (groupBounds.y + height / 2)\n              )\n              .scale(scale)\n          );\n      }\n    }\n  },\n\n  _preprocess: function(data, opts) {\n\n    var siblings = [];\n    var id = 0;\n\n    var root = {\n      name: '',\n      id: id++,\n      hidden: true,\n      children: []\n    };\n\n    var reconstructTree = function(person, parent) {\n\n      // convert to person to d3 node\n      var node = {\n        name: person.name,\n        id: id++,\n        hidden: false,\n        children: [],\n        extra: person.extra,\n        textClass: person.textClass ? person.textClass : opts.styles.text,\n        class: person.class ? person.class : opts.styles.node\n      };\n\n      // hide linages to the hidden root node\n      if (parent == root) {\n        node.noParent = true;\n      }\n\n      // apply depth offset\n      for (var i = 0; i < person.depthOffset; i++) {\n        var pushNode = {\n          name: '',\n          id: id++,\n          hidden: true,\n          children: [],\n          noParent: node.noParent\n        };\n        parent.children.push(pushNode);\n        parent = pushNode;\n      }\n\n      // sort children\n      dTree._sortPersons(person.children, opts);\n\n      // add \"direct\" children\n      _.forEach(person.children, function(child) {\n        reconstructTree(child, node);\n      });\n\n      parent.children.push(node);\n\n      //sort marriages\n      dTree._sortMarriages(person.marriages, opts);\n\n      // go through marriage\n      _.forEach(person.marriages, function(marriage, index) {\n        var m = {\n          name: '',\n          id: id++,\n          hidden: opts.hideMarriageNodes,\n          noParent: true,\n          children: [],\n          isMarriage: true,\n          extra: marriage.extra,\n          class: marriage.class ? marriage.class : opts.styles.marriageNode\n        };\n\n        var sp = marriage.spouse;\n\n        var spouse = {\n          name: sp.name,\n          id: id++,\n          hidden: false,\n          noParent: true,\n          children: [],\n          textClass: sp.textClass ? sp.textClass : opts.styles.text,\n          class: sp.class ? sp.class : opts.styles.node,\n          extra: sp.extra,\n          marriageNode: m\n        };\n\n        parent.children.push(m, spouse);\n\n        dTree._sortPersons(marriage.children, opts);\n        _.forEach(marriage.children, function(child) {\n          reconstructTree(child, m);\n        });\n\n        siblings.push({\n          source: {\n            id: node.id\n          },\n          target: {\n            id: spouse.id\n          },\n          number: index\n        });\n      });\n\n    };\n\n    _.forEach(data, function(person) {\n      reconstructTree(person, root);\n    });\n\n    return {\n      root: d3.hierarchy(root),\n      siblings: siblings\n    };\n\n  },\n\n  _sortPersons: function(persons, opts) {\n    if (persons != undefined) {\n      persons.sort(function(a, b) {\n        return opts.callbacks.nodeSorter.call(this, a.name, a.extra, b.name, b.extra);\n      });\n    }\n    return persons;\n  },\n\n  _sortMarriages: function(marriages, opts) {\n    if (marriages != undefined && Array.isArray(marriages)) {\n      marriages.sort(function(marriageA, marriageB) {\n        var a = marriageA.spouse;\n        var b = marriageB.spouse;\n        return opts.callbacks.nodeSorter.call(this, a.name, a.extra, b.name, b.extra);\n      });\n    }\n    return marriages;\n  }\n\n};\n\nreturn dTree;\n\n})));\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export const data = {\n  1: {\n    name: \"Michael R.\",\n    class: \"man\",\n    extra: {\n      yearString: \"1955\"\n    },\n    marriages: [\n      {\n        spouse: {\n          name: \"Nina R.\",\n          class: \"woman\",\n          extra: {\n            yearString: \"1955\"\n          }\n        },\n        childrenIds: [\"2\", \"3\"]\n      }\n    ]\n  },\n  2: {\n    name: \"Tanya N.\",\n    class: \"woman\",\n    extra: {\n      yearString: \"1981\"\n    },\n    marriages: [\n      {\n        spouse: {\n          name: \"David N.\",\n          class: \"man\",\n          extra: {\n            yearString: \"1984\"\n          }\n        },\n        childrenIds: []\n      }\n    ]\n  },\n  3: {\n    name: \"Sergey R.\",\n    class: \"man\",\n    extra: {\n      yearString: \"1985\"\n    },\n    marriages: [\n      {\n        spouse: {\n          name: \"Juliya S.\",\n          class: \"woman\",\n          extra: {\n            yearString: \"1986\"\n          }\n        },\n        childrenIds: []\n      }\n    ]\n  },\n  4: {\n    name: \"Yekaterina (Kreina) R.\",\n    class: \"woman\",\n    extra: {\n      yearString: \"1922-1996\"\n    },\n    marriages: [\n      {\n        spouse: {\n          name: \"\",\n          class: \"unknown\"\n        },\n        childrenIds: [\"1\"]\n      }\n    ]\n  },\n  5: {\n    name: \"Ethel R.\",\n    class: \"woman\",\n    extra: {\n      yearString: \"1883-1951\"\n    },\n    marriages: [\n      {\n        spouse: {\n          name: \"Morduh R.\",\n          class: \"man\",\n          extra: {\n            yearString: \"1880-1946\"\n          }\n        },\n        childrenIds: [\"6\", \"11\", \"4\", \"7\"]\n      }\n    ]\n  },\n  6: {\n    name: \"Deborah R.\",\n    class: \"woman\",\n    extra: {\n      yearString: \"1912-2005\"\n    },\n    marriages: []\n  },\n  7: {\n    name: \"Mira R.\",\n    class: \"woman\",\n    extra: {\n      yearString: \"1924-2008\"\n    },\n    marriages: [\n      {\n        spouse: {\n          name: \"Vladimir M.\",\n          class: \"man\",\n          extra: {\n            yearString: \"1924-1981\"\n          }\n        },\n        childrenIds: [\"8\", \"9\", \"10\"]\n      }\n    ]\n  },\n  8: {\n    name: \"Michael M.\",\n    class: \"man\",\n    extra: {\n      yearString: \"1946-1997\"\n    },\n    marriages: []\n  },\n  9: {\n    name: \"Valentine M.\",\n    class: \"man\",\n    extra: {\n      yearString: \"1948-1998\"\n    },\n    marriages: []\n  },\n  10: {\n    name: \"Eduard M.\",\n    class: \"man\",\n    extra: {\n      yearString: \"1951\"\n    },\n    marriages: []\n  },\n  11: {\n    name: \"Michael R.\",\n    class: \"man\",\n    extra: {\n      yearString: \"1916-1941\"\n    },\n    marriages: []\n  }\n};\n","import { data } from \"./data\";\n\n/*\nhashToTree builds up tree data structure for visualization:\n\nconst treeData = [\n  {\n    name: \"Michael R.\",\n    class: \"man\",\n    marriages: [\n      {\n        spouse: {\n          name: \"Nina R.\",\n          class: \"woman\"\n        },\n        children: [\n          {\n            name: \"Tanya N.\",\n            class: \"woman\",\n            marriages: [\n              {\n                spouse: {\n                  name: \"David N.\",\n                  class: \"man\"\n                }\n              }\n            ]\n          },\n          {\n            name: \"Sergey R.\",\n            class: \"man\",\n            marriages: [\n              {\n                spouse: {\n                  name: \"Juliya S.\",\n                  class: \"woman\"\n                }\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  }\n];\n*/\n\nexport const hashToTree = rootPersonId => {\n  const person = data[rootPersonId];\n\n  const tree = {\n    ...person,\n    marriages: person.marriages.map(marriage => {\n      return {\n        spouse: marriage.spouse,\n        children: marriage.childrenIds.map(childId => {\n          return hashToTree(childId);\n        })\n      };\n    })\n  };\n\n  return tree;\n};\n","import * as dTree from \"d3-dtree\";\nimport \"./Graph.css\";\nimport { hashToTree } from \"./helpers\";\n\nexport const renderGraph = () => {\n  return dTree.init([hashToTree(5)], {\n    target: \"#graph\",\n    debug: true,\n    height: 800,\n    width: 1200,\n    nodeWidth: 110,\n    callbacks: {\n      nodeClick: function (name, extra) {\n        console.log(name);\n      },\n      textRenderer: function (name, extra, textClass) {\n        if (extra && extra.yearString)\n          name = name + \" (\" + extra.yearString + \")\";\n        return \"<p align='center' class='\" + textClass + \"'>\" + name + \"</p>\";\n      },\n      nodeRenderer: function (\n        name,\n        x,\n        y,\n        height,\n        width,\n        extra,\n        id,\n        nodeClass,\n        textClass,\n        textRenderer\n      ) {\n        // This callback is optional but can be used to customize the\n        // node element using HTML.\n        let node = \"\";\n        node += \"<div \";\n        node += 'style=\"height:100%;width:100%;\" ';\n        node += 'class=\"' + nodeClass + '\" ';\n        node += 'id=\"node' + id + '\">\\n';\n        node += textRenderer(name, extra, textClass);\n        node += \"</div>\";\n        return node;\n      }\n    }\n  });\n};\n"],"sourceRoot":""}